"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8486],{8486:(P,x,o)=>{o.r(x),o.d(x,{vehicleMasterModule:()=>D});var m=o(6814),d=o(95),g=o(6458),h=o(6208),M=o(9599),u=o(5861),C=o(3467),e=o(6689),_=o(8620),c=o(5472),l=o(6725),p=o(5148),O=o(74),b=o(1326);function y(r,v){if(1&r){const s=e.EpF();e.TgZ(0,"div",14)(1,"div",3)(2,"div",15),e.NdJ("click",function(){const i=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.openVehiclesDetails(i))}),e.TgZ(3,"p",16),e._uU(4),e.qZA(),e.TgZ(5,"p",17)(6,"span",18),e._uU(7),e.qZA(),e._uU(8," | "),e.TgZ(9,"span",19),e._uU(10),e.qZA(),e._uU(11," | "),e.TgZ(12,"span",20),e._uU(13),e.qZA()()(),e.TgZ(14,"div",21)(15,"div",22)(16,"label",23)(17,"input",24),e.NdJ("change",function(n){const a=e.CHM(s).$implicit,f=e.oxw();return e.KtG(f.updVehicleStatus(n,a.id,!a.active))}),e.qZA(),e._UZ(18,"span",25),e.qZA()(),e.TgZ(19,"div",26),e.NdJ("click",function(n){const a=e.CHM(s).$implicit,f=e.oxw();return e.KtG(f.editDetails(n,a))}),e._UZ(20,"img",27),e.qZA(),e.TgZ(21,"div",28),e.NdJ("click",function(){const i=e.CHM(s).$implicit,a=e.oxw();return a.toDelete={id:i.id},e.KtG(a.showConfirm=!0)}),e._UZ(22,"img",29),e.qZA(),e.TgZ(23,"div",30)(24,"ion-col",31),e._UZ(25,"ion-icon",32),e.qZA()()()()()}if(2&r){const s=v.$implicit;e.xp6(4),e.Oqu(null==s?null:s.registrationNo),e.xp6(3),e.hij("",null==s?null:s.weightCapacity," Ton"),e.xp6(3),e.hij("",null==s?null:s.KOTCapacity," Shipments"),e.xp6(3),e.hij("\u20b9 ",null==s?null:s.fuelVoucherLmt,""),e.xp6(4),e.Q6J("checked",s.active)}}const V=[{path:"",component:(()=>{var r;class v{constructor(t,n,i,a,f){this.vehicleMasterService=t,this.navCtrl=n,this.loadingController=i,this.notificationService=a,this.sharedService=f,this.showConfirm=!1,this.sharedService.refresh.subscribe(w=>{w&&this.init()})}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.loader=yield t.loadingController.create({message:C.D.messages.pleaseWait}),history.state.vehicleCat&&(t.vehicleCat=JSON.parse(history.state.vehicleCat)),history.state.vehicleCategories&&(t.categories=JSON.parse(history.state.vehicleCategories)),t.init()})()}openAddVehicleForm(){this.navCtrl.navigateForward("/main/settings/vehicle-master/add-vehicle",{state:{vehicleCategry:JSON.stringify(this.vehicleCat),vehicleCategories:JSON.stringify(this.categories)}}),this.init()}openVehiclesDetails(t){this.navCtrl.navigateForward("/main/settings/vehicle-master/vehicle-details",{state:{vehicle:JSON.stringify(t),vehicleCategry:JSON.stringify(this.vehicleCat),vehicleCategories:JSON.stringify(this.categories)}}),this.init()}getVehicles(){var t=this;return(0,u.Z)(function*(){var n;const i=yield t.vehicleMasterService.getVehicles(null===(n=t.vehicleCat)||void 0===n?void 0:n.id);null!=i&&i.docs[0]&&(t.vehiclesData=null==i?void 0:i.docs.map(a=>({...a.data(),id:a.id}))),t.filteredVehiclesData=t.vehiclesData})()}ionViewDidEnter(){var t=this;return(0,u.Z)(function*(){t.init()})()}init(){var t=this;return(0,u.Z)(function*(){var n,i;null===(n=t.loader)||void 0===n||n.present(),yield t.getVehicles(),null===(i=t.loader)||void 0===i||i.dismiss()})()}searchVehicle(t){const n=t.detail.value;this.filteredVehiclesData=n&&""!==n.trim()?this.vehiclesData.filter(i=>i.registrationNo.toLowerCase().includes(n.toLowerCase())):this.vehiclesData}updVehicleStatus(t,n,i){var a=this;return(0,u.Z)(function*(){var f;t.stopPropagation(),a.loader.present(),yield a.vehicleMasterService.updVehicleStatus(null===(f=a.vehicleCat)||void 0===f?void 0:f.id,n,i),yield a.getVehicles(),a.loader.dismiss()})()}editDetails(t,n){var i=this;return(0,u.Z)(function*(){t.stopPropagation(),i.navCtrl.navigateForward("/main/settings/vehicle-master/add-vehicle",{state:{vehicle:JSON.stringify(n),vehicleCategry:JSON.stringify(i.vehicleCat),vehicleCategories:JSON.stringify(i.categories)}})})()}deleteVehicle(t){var n=this;return(0,u.Z)(function*(){var i;t&&(n.loader.present(),yield n.vehicleMasterService.deleteVehicle(null===(i=n.vehicleCat)||void 0===i?void 0:i.id,n.toDelete.id),yield n.getVehicles(),n.loader.dismiss(),n.notificationService.showSuccess(C.D.messages.deletedSuccessfully)),n.showConfirm=!1})()}}return(r=v).\u0275fac=function(t){return new(t||r)(e.Y36(_.s),e.Y36(c.SH),e.Y36(g.HT),e.Y36(l.g),e.Y36(p.F))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-vehicle-master"]],decls:19,vars:3,consts:[[1,"vendor-container","ion-vehicle-page"],["backUrl","/main/settings/vehicle-category",3,"headerName"],[1,"add-vehicle-wrapper-container"],[1,"inner-container"],[1,"label"],[1,"button",3,"click"],[1,"button-name"],[1,"symbol"],["src","assets/icon/plus-button.svg","alt",""],[1,"search-bar"],["animated","true","placeholder","Search Vehicles...",1,"ion-text-start","custom",3,"ionInput"],["class","row-data-wrapper-container",4,"ngFor","ngForOf"],[1,"below-space"],[3,"show","event"],[1,"row-data-wrapper-container"],[1,"data-text",3,"click"],[1,"text-name"],[1,"address"],[1,"address-name"],[1,"no"],[1,"price"],[1,"action-button"],[1,"toogle"],[1,"switch"],["type","checkbox",3,"checked","change"],[1,"slider","round"],[1,"edit-button",3,"click"],["src","assets/icon/enable-edit-button.svg","alt",""],[1,"delete",3,"click"],["src","assets/icon/enable-delete-button.svg","alt",""],[1,"forward-icon"],["size","0.75"],["name","chevron-forward-outline"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0),e._UZ(1,"app-header",1),e.TgZ(2,"section")(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6,"Create New Vehicle"),e.qZA(),e.TgZ(7,"div",5),e.NdJ("click",function(){return n.openAddVehicleForm()}),e.TgZ(8,"p",6),e._uU(9,"Add Vehicle"),e.qZA(),e.TgZ(10,"p",7),e._UZ(11,"img",8),e.qZA()()()()(),e.TgZ(12,"section")(13,"div",9)(14,"ion-searchbar",10),e.NdJ("ionInput",function(a){return n.searchVehicle(a)}),e.qZA()()(),e.TgZ(15,"section"),e.YNc(16,y,26,5,"div",11),e.qZA(),e._UZ(17,"div",12),e.TgZ(18,"app-confirmation",13),e.NdJ("event",function(a){return n.deleteVehicle(a)}),e.qZA()()),2&t&&(e.xp6(1),e.s9C("headerName",null==n.vehicleCat?null:n.vehicleCat.categoryName),e.xp6(15),e.Q6J("ngForOf",n.filteredVehiclesData),e.xp6(2),e.Q6J("show",n.showConfirm))},dependencies:[m.sg,O.G,b.S,g.wI,g.W2,g.gu,g.VI,g.j9],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.vendor-container[_ngcontent-%COMP%]{--background: linear-gradient( 180deg, #d5e6ff -8.94%, #fff 27.36%, #fff 61.93%, #c9deff 101.69% );--padding-top: 15px;--padding-bottom: 15px;--padding-start: 15px;--padding-end: 15px}ion-col[_ngcontent-%COMP%]{padding:0}.wrapper-container[_ngcontent-%COMP%]{border-radius:10px;box-shadow:2px 2px 5px 2px #357af81a;background-color:#fefefe;filter:drop-shadow(0px 4px 10px rgba(53,122,248,.1))}ion-grid[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}ion-grid[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-end: 0px;--inner-padding-end: 0px;--padding-start: 0px;--inner-padding-start: 0px}ion-grid[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:var(--Primary, #1540bd);font-size:14px;font-weight:400;padding-bottom:3px;padding-left:5px}ion-grid[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .add-variable[_ngcontent-%COMP%]{border-radius:25.938px;background:var(--Primary, #1540bd);display:flex;width:105px;height:27px;padding:8.3px;justify-content:center;align-items:center}ion-grid[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .add-variable[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--Text2, #fff);font-size:11px;font-weight:400;margin:0}ion-grid[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .add-variable[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-bottom:0;margin-left:10px;margin-top:2px}ion-grid[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:end}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;border-bottom:1px solid #e0e8f8}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;border:1px solid #1540bd}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--Text1, #505e86);font-size:16px;font-weight:400;text-wrap:wrap}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .type-select[_ngcontent-%COMP%]{color:#31bd58;font-size:13px;font-weight:400}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{text-align:right}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:9px;margin-right:9px}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]:nth-of-type(1){padding-top:0}ion-grid[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]:last-child{border-bottom:none}ion-grid[_ngcontent-%COMP%]   .disabled-row[_ngcontent-%COMP%]{color:var(--Text3, #9fa7b2);font-size:13px;font-weight:400}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{color:var(--Text1, #505e86);font-size:13px;font-weight:400;background-color:transparent;filter:drop-shadow(0px 4px 10px rgba(53,122,248,.1));-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px)}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}.switch[_ngcontent-%COMP%]{width:20px;height:12px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:0px;height:15px}.switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{height:6px;width:6px;left:3px;top:3px;bottom:4px;border-radius:50%}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(9px)}.search-bar[_ngcontent-%COMP%]{margin-top:10px}.search-bar[_ngcontent-%COMP%]   ion-searchbar.custom[_ngcontent-%COMP%]{--placeholder-color: #1540bd;--icon-color: #1540bd;--clear-button-color: #1540bd;--background: transparent;--filter: drop-shadow(0px 4px 10px rgba(53, 122, 248, .1));--backdrop-filter: blur(25px);--box-shadow: 0px 0px 0px 1px rgba(206, 211, 241, .62);--border-radius: 50px;--color: #1540bd;font-size:12px;font-weight:400;padding-inline-start:0px;padding-inline-end:0px}.forward-icon[_ngcontent-%COMP%]{padding-left:5px}.forward-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#1540bd}"]}),v})()},{path:"add-vehicle",loadChildren:()=>o.e(9954).then(o.bind(o,9954)).then(r=>r.AddVehicleModule)},{path:"vehicle-details",loadChildren:()=>Promise.all([o.e(9503),o.e(9751),o.e(3141)]).then(o.bind(o,3141)).then(r=>r.VehicleDetailsModule)}];let Z=(()=>{var r;class v{}return(r=v).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[M.Bz.forChild(V),M.Bz]}),v})(),D=(()=>{var r;class v{}return(r=v).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,h.m,d.u5,g.Pc,Z,d.UX]}),v})()},8620:(P,x,o)=>{o.d(x,{s:()=>u});var m=o(5861),d=o(1524),g=o(5017),h=o(3467),M=o(6689);let u=(()=>{var C;class e{constructor(c,l){this.storage=c,this.firestore=l}getVehicles(c){let l;return c&&(l=(0,d.PL)((0,d.hJ)(this.firestore,h.D.collection.vehiclesCategory,c,h.D.collection.vehicles))),l}uploadFile(c,l){var p=this;return(0,m.Z)(function*(){const O=h.D.storage.vehicleDocuments+"/"+l+"/"+c.name;return yield(0,g.B0)((0,g.iH)(p.storage,O),c),(0,g.Jt)((0,g.iH)(p.storage,O))})()}deleteFile(c,l){return(0,g.oq)((0,g.iH)(this.storage,l=l?l+"/"+c.name:h.D.storage.vehicleDocuments+"/"+c.name))}addVehicleCategoryData(c,l){var p=this;return(0,m.Z)(function*(){yield(0,d.pl)((0,d.JU)(p.firestore,h.D.collection.vehiclesCategory,l,h.D.collection.vehicles,c.registrationNo.toString()),c),yield(0,d.r7)((0,d.JU)(p.firestore,h.D.collection.vehiclesCategory,l),{count:(0,d.nP)(1)})})()}updVehicleStatus(c,l,p){return(0,d.r7)((0,d.JU)(this.firestore,h.D.collection.vehiclesCategory,c,h.D.collection.vehicles,l),{active:p})}deleteVehicle(c,l){var p=this;return(0,m.Z)(function*(){yield(0,d.oe)((0,d.JU)(p.firestore,h.D.collection.vehiclesCategory,c,h.D.collection.vehicles,l)),yield(0,d.r7)((0,d.JU)(p.firestore,h.D.collection.vehiclesCategory,c),{count:(0,d.nP)(-1)})})()}}return(C=e).\u0275fac=function(c){return new(c||C)(M.LFG(g.Ke),M.LFG(d.gg))},C.\u0275prov=M.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),e})()}}]);